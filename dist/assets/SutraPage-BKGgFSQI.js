import{r as u,b as H,f as I,c as _,o as A,j as r,d as v,e as P,h as $,m as D,i as O,k as G,B as h,T as m,V as k,H as S,l as W,L as B,C as M,S as V,E as F,n as U}from"./index-DpUla9dg.js";import{a as Y,l as q,v as J,G as K}from"./useSutraData-TM2S1uvv.js";function Q(n){const{loading:s,src:e,srcSet:i,onLoad:t,onError:a,crossOrigin:o,sizes:c,ignoreFallback:x}=n,[l,p]=u.useState("pending");u.useEffect(()=>{p(e?"loading":"pending")},[e]);const g=u.useRef(null),b=u.useCallback(()=>{if(!e)return;f();const d=new Image;d.src=e,o&&(d.crossOrigin=o),i&&(d.srcset=i),c&&(d.sizes=c),s&&(d.loading=s),d.onload=j=>{f(),p("loaded"),t==null||t(j)},d.onerror=j=>{f(),p("failed"),a==null||a(j)},g.current=d},[e,o,i,c,t,a,s]),f=()=>{g.current&&(g.current.onload=null,g.current.onerror=null,g.current=null)};return H(()=>{if(!x)return l==="loading"&&b(),()=>{f()}},[l,b,x]),x?"loaded":l}const X=(n,s)=>n!=="loaded"&&s==="beforeLoadOrError"||n==="failed"&&s==="onError",y=I(function(s,e){const{borderLeftWidth:i,borderBottomWidth:t,borderTopWidth:a,borderRightWidth:o,borderWidth:c,borderStyle:x,borderColor:l,...p}=_("Divider",s),{className:g,orientation:b="horizontal",__css:f,...d}=A(s),j={vertical:{borderLeftWidth:i||o||c||"1px",height:"100%"},horizontal:{borderBottomWidth:t||a||c||"1px",width:"100%"}};return r.jsx(v.hr,{ref:e,"aria-orientation":b,...d,__css:{...p,border:"0",borderColor:l,borderStyle:x,...j[b],...f},className:P("chakra-divider",g)})});y.displayName="Divider";function L(n){return D(n,s=>s==="auto"?"auto":`span ${s}/span ${s}`)}const w=I(function(s,e){const{area:i,colSpan:t,colStart:a,colEnd:o,rowEnd:c,rowSpan:x,rowStart:l,...p}=s,g=$({gridArea:i,gridColumn:L(t),gridRow:L(x),gridColumnStart:a,gridColumnEnd:o,gridRowStart:l,gridRowEnd:c});return r.jsx(v.div,{ref:e,__css:g,...p})});w.displayName="GridItem";const z=I(function(s,e){const{htmlWidth:i,htmlHeight:t,alt:a,...o}=s;return r.jsx("img",{width:i,height:t,ref:e,alt:a,...o})});z.displayName="NativeImage";const N=I(function(s,e){const{fallbackSrc:i,fallback:t,src:a,srcSet:o,align:c,fit:x,loading:l,ignoreFallback:p,crossOrigin:g,fallbackStrategy:b="beforeLoadOrError",referrerPolicy:f,...d}=s,j=i!==void 0||t!==void 0,E=l!=null||p||!j,R=Q({...s,crossOrigin:g,ignoreFallback:E}),T=X(R,b),C={ref:e,objectFit:x,objectPosition:c,...E?d:O(d,["onError","onLoad"])};return T?t||r.jsx(v.img,{as:z,className:"chakra-image__placeholder",src:i,...C}):r.jsx(v.img,{as:z,src:a,srcSet:o,crossOrigin:g,loading:l,referrerPolicy:f,className:"chakra-image",...C})});N.displayName="Image";const Z=G({displayName:"ExternalLinkIcon",path:r.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[r.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),r.jsx("path",{d:"M15 3h6v6"}),r.jsx("path",{d:"M10 14L21 3"})]})});function rr({sutraId:n,currentChapter:s}){const{sutra:e,loading:i}=Y(n);if(i||!e)return r.jsx(h,{as:"nav","aria-label":"Table of Contents",p:4,children:r.jsx(m,{children:"Loading..."})});const t=Array.from({length:e.chapters},(a,o)=>o+1);return r.jsx(h,{as:"nav","aria-label":"Table of Contents",p:6,borderRight:"1px",borderColor:"gray.200",minH:"calc(100vh - 200px)",position:"sticky",top:0,children:r.jsxs(k,{align:"stretch",spacing:4,children:[r.jsx(S,{as:"h2",size:"md",mb:2,children:e.title}),r.jsx(k,{as:"ul",align:"stretch",spacing:2,listStyleType:"none",children:t.map(a=>r.jsx(h,{as:"li",borderLeft:s===a?"3px solid":"none",borderColor:"brand.500",pl:s===a?3:0,children:r.jsxs(W,{as:B,to:`/${n}/${a}`,display:"block",p:2,borderRadius:"md",bg:s===a?"brand.50":"transparent",_hover:{bg:"gray.100"},"aria-current":s===a?"page":void 0,fontWeight:s===a?"bold":"normal",color:s===a?"brand.700":"gray.700",children:["Á¨¨ ",a," Á´†"]})},a))})]})})}function er(n,s){const[e,i]=u.useState(null),[t,a]=u.useState(!0),[o,c]=u.useState(null);return u.useEffect(()=>{async function x(){try{a(!0),c(null);const l=await q(`/content/${n}/chapter-${s}.yml`);if(!J(l))throw new Error("Invalid chapter schema");i(l)}catch(l){c(l instanceof Error?l:new Error("Unknown error")),i(null)}finally{a(!1)}}n&&s>0&&x()},[n,s]),{chapter:e,loading:t,error:o}}function sr({sutraId:n,chapterNum:s}){const{chapter:e,loading:i,error:t}=er(n,s);return i?r.jsx(M,{minH:"400px",children:r.jsx(V,{size:"xl",color:"brand.500"})}):t?r.jsx(F,{message:t.message}):e?r.jsx(h,{as:"main",role:"main",p:8,maxW:"800px",mx:"auto",children:r.jsxs(k,{align:"stretch",spacing:8,children:[r.jsx(S,{as:"h1",size:"xl",textAlign:"center",children:e.title}),r.jsxs(h,{as:"section",role:"region","aria-label":"Original Text",children:[r.jsx(S,{as:"h2",size:"md",mb:4,color:"brand.600",children:"ÂéüÊñá"}),r.jsx(m,{fontSize:"lg",lineHeight:"tall",whiteSpace:"pre-line",children:e.originalText})]}),r.jsx(y,{}),r.jsxs(h,{as:"section",role:"region","aria-label":"Translation",children:[r.jsx(S,{as:"h2",size:"md",mb:4,color:"brand.600",children:"ÁôΩË©±ÁøªË≠Ø"}),r.jsx(m,{fontSize:"md",lineHeight:"tall",whiteSpace:"pre-line",children:e.translation})]}),e.annotations&&e.annotations.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(y,{}),r.jsxs(h,{as:"section",role:"region","aria-label":"Annotations",children:[r.jsx(S,{as:"h2",size:"md",mb:4,color:"brand.600",children:"Ë®ªËß£"}),r.jsx(k,{align:"stretch",spacing:4,children:e.annotations.map((a,o)=>r.jsxs(h,{pl:4,borderLeft:"3px solid",borderColor:"brand.200",children:[r.jsxs(m,{fontSize:"sm",fontWeight:"bold",color:"brand.700",mb:1,children:["Á¨¨ ",a.paragraph," ÊÆµ"]}),r.jsx(m,{fontSize:"sm",mb:2,children:a.text}),r.jsxs(m,{fontSize:"xs",color:"gray.600",fontStyle:"italic",children:["‰æÜÊ∫êÔºö",a.source]})]},o))})]})]}),e.practiceInsights&&r.jsxs(r.Fragment,{children:[r.jsx(y,{}),r.jsxs(h,{as:"section",role:"region","aria-label":"Practice Insights",children:[r.jsx(S,{as:"h2",size:"md",mb:4,color:"brand.600",children:"‰øÆË°åÂøÉÂæó"}),r.jsx(m,{fontSize:"md",lineHeight:"tall",whiteSpace:"pre-line",children:e.practiceInsights})]})]}),e.illustrations&&e.illustrations.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(y,{}),r.jsx(h,{as:"section",role:"region","aria-label":"Illustrations",children:r.jsx(k,{align:"stretch",spacing:4,children:e.illustrations.map((a,o)=>r.jsxs(h,{children:[r.jsx(N,{src:a.url,alt:a.alt,borderRadius:"md",maxW:"full"}),a.caption&&r.jsx(m,{fontSize:"sm",color:"gray.600",mt:2,textAlign:"center",children:a.caption})]},o))})})]}),e.podcastUrl&&r.jsxs(r.Fragment,{children:[r.jsx(y,{}),r.jsx(h,{as:"section",children:r.jsxs(W,{href:e.podcastUrl,isExternal:!0,color:"brand.600",fontSize:"md",fontWeight:"bold",children:["Êî∂ËÅΩ Podcast üìª ",r.jsx(Z,{mx:"2px"})]})})]}),e.transcript&&r.jsxs(h,{as:"section",role:"region","aria-label":"Transcript",children:[r.jsx(S,{as:"h3",size:"sm",mb:3,color:"brand.600",children:"Podcast ÊñáÂ≠óÁ®ø"}),r.jsx(m,{fontSize:"sm",lineHeight:"tall",whiteSpace:"pre-line",color:"gray.700",children:e.transcript})]}),e.sourceAttribution&&r.jsxs(r.Fragment,{children:[r.jsx(y,{}),r.jsxs(m,{fontSize:"xs",color:"gray.500",textAlign:"center",children:["‰æÜÊ∫êÔºö",e.sourceAttribution]})]})]})}):r.jsx(F,{message:"Chapter not found"})}function tr(){const{sutraId:n,chapterNum:s}=U(),e=s?parseInt(s,10):1;return n?r.jsxs(K,{templateColumns:{base:"1fr",md:"250px 1fr"},gap:0,children:[r.jsx(w,{display:{base:"none",md:"block"},children:r.jsx(rr,{sutraId:n,currentChapter:e})}),r.jsx(w,{children:r.jsx(sr,{sutraId:n,chapterNum:e})})]}):r.jsx("div",{children:"Invalid sutra ID"})}export{tr as default};
